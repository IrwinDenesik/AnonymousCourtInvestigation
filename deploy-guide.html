<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract Deployment Guide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
            line-height: 1.6;
        }
        .guide-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        .btn {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
        }
        ul li {
            margin: 10px 0;
        }
        .highlight {
            background: yellow;
            padding: 2px 4px;
        }
    </style>
</head>
<body>
    <div class="guide-card">
        <h1>üöÄ Anonymous Court Investigation Contract Deployment Guide</h1>

        <div class="success">
            <h3>‚úÖ Prerequisites Check</h3>
            <ul>
                <li>MetaMask installed and configured</li>
                <li>Connected to Sepolia Test Network (Chain ID: 11155111)</li>
                <li>Sepolia ETH test tokens in your wallet</li>
                <li>Node.js and npm installed</li>
            </ul>
        </div>

        <h2>üìã Step-by-Step Deployment</h2>

        <div class="step">
            <h3>Step 1: Set up Hardhat Project</h3>
            <p>Create a new Hardhat project for deploying to Zama network:</p>
            <div class="code-block">
mkdir court-investigation-deploy
cd court-investigation-deploy
npm init -y
npm install --save-dev hardhat @nomicfoundation/hardhat-toolbox
npm install --save-dev @fhevm/solidity
npx hardhat
            </div>
            <p>Choose "Create a JavaScript project" when prompted.</p>
        </div>

        <div class="step">
            <h3>Step 2: Configure Hardhat</h3>
            <p>Update <code>hardhat.config.js</code>:</p>
            <div class="code-block">
require("@nomicfoundation/hardhat-toolbox");

module.exports = {
  solidity: "0.8.24",
  networks: {
    sepolia: {
      url: "https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID",
      accounts: ["YOUR_PRIVATE_KEY"], // Replace with your private key
      chainId: 11155111
    }
  }
};
            </div>
            <div class="warning">
                <strong>‚ö†Ô∏è Security Warning:</strong> Never commit private keys to version control. Use environment variables or .env files.
            </div>
        </div>

        <div class="step">
            <h3>Step 3: Add the Contract</h3>
            <p>Copy <code>AnonymousCourtInvestigation.sol</code> to <code>contracts/</code> directory.</p>
            <p>The contract is already in your project at:</p>
            <div class="code-block">contracts/AnonymousCourtInvestigation.sol</div>
        </div>

        <div class="step">
            <h3>Step 4: Create Deployment Script</h3>
            <p>Create <code>scripts/deploy.js</code>:</p>
            <div class="code-block">
async function main() {
  console.log("Deploying AnonymousCourtInvestigation to Sepolia...");

  const [deployer] = await ethers.getSigners();
  console.log("Deploying with account:", deployer.address);

  const balance = await deployer.getBalance();
  console.log("Account balance:", ethers.utils.formatEther(balance), "ETH");

  const AnonymousCourtInvestigation = await ethers.getContractFactory("AnonymousCourtInvestigation");
  const contract = await AnonymousCourtInvestigation.deploy();

  await contract.deployed();

  console.log("‚úÖ Contract deployed to:", contract.address);
  console.log("üîó Explorer:", `https://sepolia.etherscan.io/address/${contract.address}`);
  console.log("‚öôÔ∏è  Update app.js with this address:");
  console.log(`CONTRACT_ADDRESS = "${contract.address}";`);
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
            </div>
        </div>

        <div class="step">
            <h3>Step 5: Deploy the Contract</h3>
            <p>Run the deployment script:</p>
            <div class="code-block">
npx hardhat run scripts/deploy.js --network sepolia
            </div>
            <p>You should see output like:</p>
            <div class="code-block">
Deploying AnonymousCourtInvestigation to Sepolia...
Deploying with account: 0x1234...
Account balance: 0.5 ETH
‚úÖ Contract deployed to: 0xAbC123...
üîó Explorer: https://sepolia.etherscan.io/address/0xAbC123...
‚öôÔ∏è  Update app.js with this address:
CONTRACT_ADDRESS = "0xAbC123...";
            </div>
        </div>

        <div class="step">
            <h3>Step 6: Update Frontend</h3>
            <p>Copy the deployed contract address and update <code>app.js</code>:</p>
            <div class="code-block">
// Find this line in app.js:
this.CONTRACT_ADDRESS = "0x...";

// Replace with your deployed address:
this.CONTRACT_ADDRESS = "<span class="highlight">0xYourDeployedContractAddress</span>";
            </div>
        </div>

        <div class="step">
            <h3>Step 7: Test the Application</h3>
            <p>Refresh your browser and test the connection:</p>
            <ul>
                <li>Connect your MetaMask wallet</li>
                <li>Verify you're on Sepolia Test Network</li>
                <li>Check that the dashboard loads without errors</li>
                <li>Try starting a new investigation (if you're the admin)</li>
            </ul>
        </div>

        <h2>üîß Alternative: Using Remix IDE</h2>

        <div class="step">
            <h3>Quick Deployment with Remix</h3>
            <ol>
                <li>Open <a href="https://remix.ethereum.org" target="_blank">Remix IDE</a></li>
                <li>Create new file: <code>AnonymousCourtInvestigation.sol</code></li>
                <li>Copy the contract code from <code>contracts/AnonymousCourtInvestigation.sol</code></li>
                <li>Compile with Solidity 0.8.24</li>
                <li>Connect MetaMask to Sepolia Test Network</li>
                <li>Deploy the contract</li>
                <li>Copy the deployed address to <code>app.js</code></li>
            </ol>
        </div>

        <h2>üêõ Troubleshooting</h2>

        <div class="warning">
            <h3>Common Issues and Solutions</h3>
            <ul>
                <li><strong>Insufficient funds:</strong> Get Sepolia ETH from faucet (sepoliafaucet.com)</li>
                <li><strong>Network error:</strong> Verify Sepolia RPC URL and Infura project ID</li>
                <li><strong>Contract not found:</strong> Check the deployed address is correct</li>
                <li><strong>Transaction failed:</strong> Ensure you have enough gas (ETH)</li>
            </ul>
        </div>

        <h2>üéØ Next Steps</h2>

        <div class="success">
            <p>After successful deployment:</p>
            <ul>
                <li>‚úÖ Contract is deployed and verified</li>
                <li>‚úÖ Frontend is connected to the contract</li>
                <li>‚úÖ You can start using the investigation system</li>
                <li>‚úÖ Other users can connect and participate</li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <a href="index.html" class="btn">‚Üê Back to Application</a>
            <a href="status.html" class="btn">üîç System Status</a>
            <a href="test.html" class="btn">üß™ Connection Test</a>
            <a href="network-info.html" class="btn">üìñ Network Info</a>
        </div>
    </div>
</body>
</html>